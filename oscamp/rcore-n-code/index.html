<!doctype html><html lang=zh-Hans><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://blog.windeye.top name=base><title>æè¾¹å¤§å”çš„åšå®¢ â€¢ rCore-Nä»£ç åˆ†æ</title><link href=https://blog.windeye.top/img/seedling.png rel=icon type=image/png><link href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 105 55"><text y=".7em" font-size="82">ğŸ¦Š</text></svg>' rel=icon><link href=https://blog.windeye.top/atom.xml rel=alternate title=æè¾¹å¤§å”çš„åšå®¢ type=application/atom+xml><link href="https://blog.windeye.top/custom_subset.css?h=6de30382822eb2c02ee0" rel=stylesheet><link href="https://blog.windeye.top/main.css?h=03882d7b0d0cfe74b15f" rel=stylesheet><link href="https://blog.windeye.top/skins/zyw.css?h=4bbeae109422ff1bdcf0" rel=stylesheet><meta content="light dark" name=color-scheme><meta media="(prefers-color-scheme: light)" content=#ffffff name=theme-color><meta media="(prefers-color-scheme: dark)" content=#000000 name=theme-color><meta content=åˆ†ærCore-Nçš„å¯åŠ¨æµç¨‹ï¼Œä¸ºé©±åŠ¨ç§»æ¤åšå‡†å¤‡ name=description><meta content=åˆ†ærCore-Nçš„å¯åŠ¨æµç¨‹ï¼Œä¸ºé©±åŠ¨ç§»æ¤åšå‡†å¤‡ property=og:description><meta content="index, nofollow" name=robots><meta content=rCore-Nä»£ç åˆ†æ property=og:title><meta content=article property=og:type><meta content=zh_CN property=og:locale><meta content=https://blog.windeye.top/oscamp/rcore-n-code/ property=og:url><meta content=æè¾¹å¤§å”çš„åšå®¢ property=og:site_name><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self' https://cdn.jsdelivr.net/;style-src 'self' https://giscus.app/default.css;frame-src player.vimeo.com https://www.youtube-nocookie.com giscus.app;connect-src 'self';script-src 'self'  giscus.app 'self'" http-equiv=Content-Security-Policy><noscript><link href=https://blog.windeye.top/no_js.css rel=stylesheet></noscript><script src=https://blog.windeye.top/js/initializeTheme.min.js></script><script defer src=https://blog.windeye.top/js/themeSwitcher.min.js></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://blog.windeye.top>æè¾¹å¤§å”çš„åšå®¢</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://blog.windeye.top/blog/> åšå®¢ </a><li><a class="nav-links no-hover-padding" href=https://blog.windeye.top/archive/> å½’æ¡£ </a><li><a class="nav-links no-hover-padding" href=https://blog.windeye.top/tags/> æ ‡ç­¾ </a><li class="theme-switcher-wrapper js"><div aria-label=åˆ‡æ¢åˆ°æš—æ¨¡å¼ aria-pressed=false class=theme-switcher role=button tabindex=0 title=åˆ‡æ¢åˆ°æš—/äº®æ¨¡å¼></div><div aria-hidden=true aria-label=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼ class=theme-resetter role=button tabindex=0 title=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼></div></ul></div></nav></header><div class=content><main><article><h1 class=article-title>rCore-Nä»£ç åˆ†æ</h1><ul class=meta><li>2023å¹´ 11æœˆ17æ—¥</li> â€¢ <li title="å…± 1225 å­—">è¯»å®Œçº¦éœ€ 7 åˆ†é’Ÿ</ul><ul class="meta last-updated"><li>æœ€åæ›´æ–°äº 2023å¹´ 11æœˆ17æ—¥</ul><section class=body><h2 id=huan-jing><a aria-label="Anchor link for: huan-jing" class="header-anchor no-hover-padding" href=#huan-jing><span aria-hidden=true class=link-icon></span></a> ç¯å¢ƒ</h2><p>åç»­å‡ä»¥qemuä¸ºåŸºç¡€è¿›è¡Œåˆ†æã€‚ä¸»è¦å¯¹ä¸€äº›ä¸ç†Ÿæ‚‰ã€å®¹æ˜“å¿˜è®°æˆ–æ˜¯è¿˜æœ‰ç–‘é—®çš„åœ°æ–¹è¿›è¡Œè®°å½•ã€‚<h2 id=rust-main><a aria-label="Anchor link for: rust-main" class="header-anchor no-hover-padding" href=#rust-main><span aria-hidden=true class=link-icon></span></a> rust_main</h2><p>é¦–å…ˆåˆå§‹åŒ–çš„æ˜¯hart 0, ä¸ç¡®å®šæ€ä¹ˆç¿»è¯‘å¥½ï¼Œä¿ç•™hart, ç±»ä¼¼å¤šå¤„ç†å™¨ï¼Ÿé©±åŠ¨ä»<code>device::init</code>å¼€å§‹ã€‚<h3 id=device-init><a aria-label="Anchor link for: device-init" class="header-anchor no-hover-padding" href=#device-init><span aria-hidden=true class=link-icon></span></a> device::init()</h3><p>ç›®å‰åªè°ƒç”¨äº†<code>net:init()</code>, æŠŠNET_DEVICE_ADDRæŒ‡å‘çš„åœ°å€0x10008000ï¼Œç„¶åä»¥è¿™å—å†…å­˜å»ºç«‹MmioTransport,å†ä»¥è¿™ä¸ªMmioTransport, NET_QUEUE_SIZEï¼ŒNET_BUFFER_LENå»ºç«‹VirtIONetè®¾å¤‡ï¼Œç„¶åæ˜¯åŠ é”ï¼Œç»‘å®šåˆ°å…¨å±€é™æ€å˜é‡NET_DEVICEã€‚æœ€åè°ƒç”¨mem::forgotä½¿å…¶å¤„äºä¸å¯è®¿é—®çŠ¶æ€ã€‚<p>ç–‘é—®ï¼š<ol><li>åˆ°è¿™é‡Œå†…å­˜ç®¡ç†å…¶å®å·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼Œé‚£ä¹ˆè¿™ä¸ªNET_DEVICE_ADDRæ˜¯ç‰©ç†åœ°å€è¿˜æ˜¯å†…æ ¸Sæ€çš„è™šæ‹Ÿåœ°å€ï¼Ÿ<li>NET_DEVICE_ADDRåªæ˜¯ä¸€ä¸ªèµ·å§‹åœ°å€ï¼ŒMmioTransport::newè¯»å–äº†magic, device_id, vresion, è¿™äº›æ˜¯volread!ç›´æ¥ä»ç¡¬ä»¶å¯„å­˜å™¨è¯»å–çš„å—ï¼Ÿ<li>æœ€åçš„forgetä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ç†è§£æ˜¯åç»­å°±åªèƒ½é€šè¿‡NET_DEVICEæ¥è®¿é—®è¿™ä¸ªè™šæ‹Ÿç½‘ç»œè®¾å¤‡äº†ã€‚</ol><h3 id=plic><a aria-label="Anchor link for: plic" class="header-anchor no-hover-padding" href=#plic><span aria-hidden=true class=link-icon></span></a> PLIC</h3><p>PLICå¤§è‡´çœ‹äº†ä¸‹æ–‡æ¡£ï¼Œåº”è¯¥æ˜¯é›†ä¸­ç®¡ç†ä¸­æ–­çš„åŠŸèƒ½ï¼Œå…ˆç†æ¸…æ¥šæµç¨‹å›å¤´ç»†çœ‹ã€‚<h4 id=plic-init><a aria-label="Anchor link for: plic-init" class="header-anchor no-hover-padding" href=#plic-init><span aria-hidden=true class=link-icon></span></a> plic:init()</h4><p>æŒ‰<code>PLIC_BASE: 0xc00_0000</code>å’Œ<code>PLIC_PRIORITY_BIT: 3</code>æ¥åœ¨plicä¸­æ³¨å†Œqemuçš„uartä¸­æ–­12ï½15çš„ä¼˜å…ˆçº§ï¼Œå‡è®¾ç½®ä¸ºPriority::lowest()ï¼Œå¦‚æœhartæ˜¯0è¿˜æ³¨å†Œäº†ä¸€ä¸ªä¸­æ–­8ï¼Œ<h4 id=plic-init-hart-hart-id><a aria-label="Anchor link for: plic-init-hart-hart-id" class="header-anchor no-hover-padding" href=#plic-init-hart-hart-id><span aria-hidden=true class=link-icon></span></a> plic::init_hart(hart_id);</h4><p>æ ¹æ®hart_idåˆå§‹åŒ–æ¯ä¸ªhartçš„ä¸­æ–­ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­ç”¨åˆ°äº†get_contextï¼Œå®ƒç”¨3 * hart_id + 0 ~ 2 çš„æ–¹å¼æ¥æ ‡è¯†æ¯ä¸ªhartçš„Mã€Sã€Uç‰¹æƒçº§ã€‚ç„¶åä½¿èƒ½iniä¸­æ³¨å†Œçš„ä¸­æ–­ï¼Œæœ€åè°ƒç”¨Plic::set_thresholdæŠŠä¸­æ–­ä¸´ç•Œå€¼è®¾ç½®ä¸ºPriority::any()ã€‚<p>ç–‘é—®ï¼š<ol><li>ä¸­æ–­8çš„å…·ä½“ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ<li>plicçš„ç›¸å…³è°ƒç”¨ï¼Œåœ¨crateçš„docé‡Œé¢æ²¡æœ‰æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œä¸å¤ªæ˜ç™½å…·ä½“ä½œç”¨ã€‚æ¯”å¦‚Priorityå„çº§åˆ«çš„åŒºåˆ«å’Œset_thresholdçš„ä½œç”¨ç­‰</ol><h3 id=uart-init><a aria-label="Anchor link for: uart-init" class="header-anchor no-hover-padding" href=#uart-init><span aria-hidden=true class=link-icon></span></a> uart:init()</h3><p>ä¸²å£è®¾å¤‡çš„ä¸»è¦æ•°æ®ç»“æ„æ˜¯<code>BufferedSerial</code>ï¼Œå®ƒçš„<code>hardware</code>å­—æ®µæŒ‡å‘çš„æ˜¯SerialHardware, å®ƒæ˜¯MmioUart8250ç±»å‹ï¼ŒåŸç†è·Ÿä¸Šé¢çš„MmioTransportç±»ä¼¼ï¼Œéƒ½æ˜¯ä¼ å…¥ä¸€ä¸ªbaseåœ°å€ï¼Œé…åˆåŒºé—´é•¿åº¦ç­‰å‚æ•°å°†è¿™æ®µåœ°å€åˆå§‹åŒ–ä¸ºUart8250ç±»å‹çš„è®¾å¤‡ã€‚ <code>uart:init()</code>åˆå§‹åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š<ol><li>å®šä¹‰å…¨å±€å˜é‡BUFFERED_SERIALï¼Œé€šè¿‡lazy_staicåŠ è½½ã€‚<li><code>BufferedSerial::new</code>å…ˆåˆå§‹åŒ–<code>MmioUart8250</code>è®¾å¤‡ï¼Œä»¥<code>SERIAL_BASE_ADDRESSï¼š0x1000_2000 + i * SERIAL_ADDRESS_STRIDEï¼š0x1000</code>ä¸ºbase_addressåˆå§‹åŒ–ä¸²å£è®¾å¤‡ï¼Œä¸€å…±4ä¸ª,å¹¶ä¸”åˆå§‹åŒ–æ¥æ”¶å‘é€é˜Ÿåˆ—ï¼Œå‡ä½¿ç”¨çš„æ˜¯VecDeque, é˜Ÿåˆ—é•¿åº¦ç”±<code>DEFAULT_RX_BUFFER_SIZE</code>å’Œ<code>DEFAULT_RX_BUFFER_SIZE</code>å®šä¹‰ã€‚<li>è°ƒç”¨hardware_init(),å‚æ•°æ˜¯æ³¢ç‰¹ç‡, åˆå§‹åŒ–ä¸‰ä¸ªæ³¢ç‰¹ç‡ä¸º<code>115200</code>å’Œä¸€ä¸ª<code>6250000</code>çš„ä¸²å£ã€‚<li><code>hardware.write_ier(0)</code> å¼€å¯ç¬¬ä¸€ä¸ªä¸²å£çš„ä¸­æ–­ä½¿èƒ½ã€‚<li>è°ƒç”¨read_msr(), è¯¥å‡½æ•°è¿”å›ä¸²å£æ•°æ¨¡è½¬æ¢å™¨(Modem)çš„çŠ¶æ€ã€‚è´´ä¸€ä¸‹<a href=https://docs.rs/uart8250/0.5.0/uart8250/uart/struct.MmioUart8250.html#method.read_msr>uart8205æ–‡æ¡£</a>çš„è¯´æ˜:</ol><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">read_msr</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">u8</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-return-type z-rust">Read MSR <span class="z-punctuation z-section z-group z-begin z-rust">(</span>offset + 6<span class="z-punctuation z-section z-group z-end z-rust">)</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-return-type z-rust">
</span></span></span></code></pre><pre class=z-code><code><span class="z-text z-plain">Modem Status Register
</span><span class="z-text z-plain">Offset: +6 . This register is another read-only register that is here to inform your software about the current status of the modem. The modem accessed in this manner can either be an external modem, or an internal modem that uses a UART as an interface to the computer.
</span><span class="z-text z-plain">Bit	Notes
</span><span class="z-text z-plain">7	Carrier Detect
</span><span class="z-text z-plain">6	Ring Indicator
</span><span class="z-text z-plain">5	Data Set Ready
</span><span class="z-text z-plain">4	Clear To Send
</span><span class="z-text z-plain">3	Delta Data Carrier Detect
</span><span class="z-text z-plain">2	Trailing Edge Ring Indicator
</span><span class="z-text z-plain">1	Delta Data Set Ready
</span><span class="z-text z-plain">0	Delta Clear To Send
</span></code></pre><ol start=6><li>è°ƒç”¨read_lsr()ï¼Œè¿”å›çº¿è·¯çŠ¶æ€ã€‚è¿˜æ˜¯è´´ä¸€ä¸‹<a href=https://docs.rs/uart8250/0.5.0/uart8250/uart/struct.MmioUart8250.html#method.read_lsr>uart8205æ–‡æ¡£</a>çš„è¯´æ˜</ol><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">read_lsr</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">u8</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-return-type z-rust">Read LSR <span class="z-punctuation z-section z-group z-begin z-rust">(</span>offset + 5<span class="z-punctuation z-section z-group z-end z-rust">)</span>
</span></span></span></code></pre><pre class=z-code><code><span class="z-text z-plain">Line Status Register
</span><span class="z-text z-plain">Offset: +5 . This register is used primarily to give you information on possible error conditions that may exist within the UART, based on the data that has been received. Keep in mind that this is a â€œread onlyâ€ register, and any data written to this register is likely to be ignored or worse, cause different behavior in the UART. There are several uses for this information, and some information will be given below on how it can be useful for diagnosing problems with your serial data connection:
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Bit	Notes
</span><span class="z-text z-plain">7	Error in Received FIFO
</span><span class="z-text z-plain">6	Empty Data Holding Registers
</span><span class="z-text z-plain">5	Empty Transmitter Holding Register
</span><span class="z-text z-plain">4	Break Interrupt
</span><span class="z-text z-plain">3	Framing Error
</span><span class="z-text z-plain">2	Parity Error
</span><span class="z-text z-plain">1	Overrun Error
</span><span class="z-text z-plain">0	Data Ready
</span></code></pre><ol start=7><li><p>è°ƒç”¨write_mcr(0)å†™Modemæ§åˆ¶å¯„å­˜å™¨ä»¥æ§åˆ¶æµé‡ã€‚</p><li><p>è°ƒç”¨initåˆå§‹åŒ–ä¸²å£ï¼Œå‚æ•°æ˜¯æ—¶é’Ÿå’Œæ³¢ç‰¹ç‡ã€‚è¿™é‡Œä¼ å…¥çš„æ—¶é’Ÿæ˜¯100_000_000ï¼ˆå•ä½æ˜¯Hzï¼Ÿï¼‰ï¼Œæ³¢ç‰¹ç‡æ˜¯ä¹‹å‰ä¼ å…¥çš„å‚æ•°ã€‚</p><li><p>è°ƒç”¨enable_received_data_available_interrupt()ï¼Œä½¿ä¸²å£è¿›å…¥å¯ä»¥æ¥æ”¶æ•°æ®çš„çŠ¶æ€</p><li><p>è®¾ç½®rx_intr_enabledä¸ºtrueï¼Œè¡¨æ˜å¯ä»¥æ¥æ”¶æ•°æ®äº†ã€‚</p><li><p>è°ƒç”¨write_fcr(0b11_000_11_1)ï¼Œä»£ç æœ‰æ³¨é‡Šï¼šä»æœ€ä½ä½å¼€å§‹ï¼Œåˆ†åˆ«ä»£è¡¨ï¼š</p></ol><table><thead><tr><th><th><th><th><th><th><th><th><tbody><tr><td>1<td>1<td>0<td>0<td>0<td>1<td>1<td>1<tr><td>ä¸­æ–­è§¦å‘ç­‰çº§=14å­—èŠ‚(Bytes)<td>è§¦å‘ç­‰çº§=56å­—èŠ‚<td>å¯ç”¨64å­—èŠ‚FIFO(16750)<td>ä¿ç•™<td>DMAæ¨¡å¼é€‰æ‹©<td>FIFOæ¸…é™¤(å¤ä½)å‘é€<td>FIFOæ¸…é™¤æ¥æ”¶<td>å¯ç”¨FIFO</table><p>ç–‘é—®ï¼š æœ€å¼€å§‹æ‰¾åˆ°çš„æ˜¯uart8250 crate 0.6ç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œæ¥å£æœ‰æ¯”è¾ƒå¤§çš„å˜åŒ–ï¼Œåç»­æœ‰æ—¶é—´æ¥çœ‹<h3 id=lkm-init><a aria-label="Anchor link for: lkm-init" class="header-anchor no-hover-padding" href=#lkm-init><span aria-hidden=true class=link-icon></span></a> lkm::init()</h3><p>é€šè¿‡lazy_staticåšäº†ä¸‰ä»¶äº‹ï¼š<ol><li>åŠ è½½å…¨å±€å˜é‡SHARED_SCHEï¼ŒåŠ è½½äº†åä¸º<code>sharedscheduler</code>çš„åº”ç”¨ç¨‹åºï¼Œä½œä¸ºå…±äº«è°ƒåº¦å™¨ã€‚<li>ä¸ºä¹‹åˆ›å»ºäº†åä¸ºSHARED_SCHE_MEMORYSETçš„å…¨å±€å†…å­˜ç®¡ç†å®ä¾‹ã€‚<li>åˆ›å»ºå…¨å±€å˜é‡SHARED_ELFï¼Œä¿å­˜ä»<code>sharedscheduler</code>çš„åº”ç”¨ç¨‹åºæ–‡ä»¶è¯»å–çš„elfæ•°æ®ã€‚</ol></section><nav class=article-navigation><div><a aria-label="<<<" aria-describedby=left_title href=https://blog.windeye.top/oscamp/virtiogpu/><span class=arrow>â†</span>Â <<<</a><p aria-hidden=true id=left_title>Virtio Gpué©±åŠ¨ç§»æ¤</div><div><a aria-label=">>>" aria-describedby=right_title href=https://blog.windeye.top/oscamp/workingnote1/>>>>Â <span class=arrow>â†’</span></a><p aria-hidden=true id=right_title>2023ç§‹å†¬å­£å¼€æºæ“ä½œç³»ç»Ÿè®­ç»ƒè¥æ—¥å¿—ï¼ˆä¸€ï¼‰</div></nav><div class=comments data-category=Announcements data-category-id=DIC_kwDOK70hhM4Cb4Qn data-dark-theme=noborder_dark data-input-position=top data-lang=zh-Hans data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=1 data-repo=ziyouwa/blog-commit data-repo-id=R_kgDOK70hhA data-strict=1 data-term=rcore-n-code id=comments><script async src=https://blog.windeye.top/js/giscus.min.js></script><noscript>You need JavaScript to view the comments.</noscript></div></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=overlay for=toc-toggle></label><label class=button for=toc-toggle id=toc-button title=åˆ‡æ¢ç›®å½•><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#huan-jing>ç¯å¢ƒ</a><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#rust-main>rust_main</a> <ul><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#device-init>device::init()</a><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#plic>PLIC</a> <ul><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#plic-init>plic:init()</a><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#plic-init-hart-hart-id>plic::init_hart(hart_id);</a></ul><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#uart-init>uart:init()</a><li><a href=https://blog.windeye.top/oscamp/rcore-n-code/#lkm-init>lkm::init()</a></ul></ul></div></div></div><a class=no-hover-padding href=#comments id=comments-button title=è½¬åˆ°è¯„è®ºåŒº> <svg viewbox="0 0 20 20" fill=currentColor><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule=evenodd fill-rule=evenodd /></svg> </a><a class=no-hover-padding href=# id=top-button title=è¿”å›é¡µé¢é¡¶éƒ¨> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> å·²å¤åˆ¶! </span><span class=hidden id=copy-init> å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ </span><script defer src=https://blog.windeye.top/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://blog.windeye.top/atom.xml> <img alt=feed src=https://blog.windeye.top/social_icons/rss.svg title=feed> </a><li class=js><a class="nav-links no-hover-padding social" data-encoded-email="eWpzc3NAaG90bWFpbC5jb20=" href=#><img alt=email src=https://blog.windeye.top/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/ziyouwa/> <img alt=github src=https://blog.windeye.top/social_icons/github.svg title=github> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://blog.windeye.top/about/> å…³äº </a><li><a class="nav-links no-hover-padding" href=https://blog.windeye.top/privacy/> éšç§æ”¿ç­– </a></ul> </small></nav><div class=credits><small> ç½‘ç«™åŸºäº <a href=https://www.getzola.org>Zola</a> å’Œ <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><script async src=https://blog.windeye.top/js/decodeMail.min.js></script></footer>